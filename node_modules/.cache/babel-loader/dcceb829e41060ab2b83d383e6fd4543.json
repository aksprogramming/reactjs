{"ast":null,"code":"import _classCallCheck from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/opt/lampp/htdocs/react/spa/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import LoadingScreen from'react-loading-screen';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(props){var _this;_classCallCheck(this,Login);_this=_possibleConstructorReturn(this,_getPrototypeOf(Login).call(this,props));var domain=process.env.REACT_APP_NOT_SECRET_CODE;_this.state={domain:domain,loading:true,formValid:false,email:\"\",password:\"\",errors:{password:'',email:'',common:''}};_this.handleLogin=_this.handleLogin.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"onTodoChange\",value:function onTodoChange(event){var target=event.target;var value=target.value;var name=target.name;// eslint-disable-next-line        \nswitch(name){case'email':// eslint-disable-next-line\nthis.state.email=value;if(value===''){// eslint-disable-next-line\nthis.state.errors.email='Email is required';}else{var emailValid=value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);if(emailValid){// eslint-disable-next-line\nthis.state.errors.email='';}else{// eslint-disable-next-line\nthis.state.errors.email='Email is invalid';}}break;case'password':// eslint-disable-next-line\nthis.state.password=value;if(value===''){// eslint-disable-next-line\nthis.state.errors.password='Password is required';}else{// eslint-disable-next-line\nvar password=value.match('^[a-zA-Z0-9!@#\\$%\\^&]{8,}$');if(password){// eslint-disable-next-line\nthis.state.errors.password='';//                         password = value.match('^(?=.*[0-9])(?=.{8,})');\n//                            if(password){\n// // eslint-disable-next-line\n//                                 this.state.errors.password = '';\n//                             }else{\n// // eslint-disable-next-line\n//                                 this.state.errors.password = 'Contains a number';\n//                             }\n}else{// eslint-disable-next-line\nthis.state.errors.password='At least 8 characters';}}break;}// eslint-disable-next-line\nif(this.state.errors.email!=''||this.state.errors.password!=''){this.flag=1;}else{this.flag=0;}if(this.flag===1){// eslint-disable-next-line\nthis.state.formValid=false;}else{// eslint-disable-next-line\nthis.state.formValid=true;}// eslint-disable-next-line\nthis.forceUpdate();}},{key:\"handleLogin\",value:function handleLogin(event){var _this2=this;// eslint-disable-next-line\nthis.state.loading=true;this.forceUpdate();event.preventDefault();var email=event.target.email.value;var password=event.target.password.value;var formData=new FormData();formData.append(\"email\",email);formData.append(\"password\",password);event.preventDefault();fetch(this.state.domain+\"api/v1/login\",{method:\"POST\",header:{'Content-Type':'application/json','Accept':'application/json'},body:formData}).then(function(res){return res.json();}).then(function(result){// console.log(result);\nif(result.error){// eslint-disable-next-line\n_this2.state.errors.common=\"Invalid email or password.\";}if(result.success){_this2.props.history.push(\"/Dashboard\");}// eslint-disable-next-line         \n_this2.state.loading=false;_this2.forceUpdate();},function(error){});}},{key:\"componentDidMount\",value:function componentDidMount(){// eslint-disable-next-line   \nthis.state.loading=false;this.forceUpdate();}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",null,React.createElement(LoadingScreen,{loading:this.state.loading,bgColor:\"#f1f1f1\",spinnerColor:\"#9ee5f8\",textColor:\"#676767\",text:\"\"}),React.createElement(\"form\",{onSubmit:this.handleLogin,method:\"post\",hidden:this.state.loading},React.createElement(\"h3\",null,\"Login to your account\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Email address\"),React.createElement(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",placeholder:\"Enter email\",onBlur:function onBlur(e){return _this3.onTodoChange(e);}}),React.createElement(\"span\",{className:\"errors\"},this.state.errors.email)),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",placeholder:\"Enter password\",onBlur:function onBlur(e){return _this3.onTodoChange(e);},onChange:function onChange(e){return _this3.onTodoChange(e);}}),React.createElement(\"span\",{className:\"errors\"},this.state.errors.password)),React.createElement(\"div\",{className:\"errors alert alert-danger\",hidden:this.state.errors.common=='',role:\"alert\"},this.state.errors.common),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",disabled:!this.state.formValid},\"Login\"),React.createElement(\"p\",{className:\"forgot-password text-right\"}),React.createElement(\"p\",{className:\"forgot-password\"},\"Don\\u2019t have an account? \",React.createElement(Link,{to:\"/sign-up\"},\"Register your business\"))));}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["/opt/lampp/htdocs/react/spa/src/components/login.component.js"],"names":["React","Component","Link","LoadingScreen","Login","props","domain","process","env","REACT_APP_NOT_SECRET_CODE","state","loading","formValid","email","password","errors","common","handleLogin","bind","event","target","value","name","emailValid","match","flag","forceUpdate","preventDefault","formData","FormData","append","fetch","method","header","body","then","res","json","result","error","success","history","push","e","onTodoChange"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {  Link } from \"react-router-dom\";\nimport LoadingScreen from 'react-loading-screen';\nexport default class Login extends Component {\n    constructor(props) {\n        super(props);\n        const domain=process.env.REACT_APP_NOT_SECRET_CODE;\n        this.state = {\n                domain:domain,\n                loading:true,\n                formValid:false,\n                email: \"\",\n                password:\"\",\n                errors: {\n                password: '',\n                email:'',\n                common:'',\n            }\n        };\n        this.handleLogin = this.handleLogin.bind(this);\n    }\n       onTodoChange(event){\n        let target = event.target;\n        const value=target.value;\n        const name=target.name;\n// eslint-disable-next-line        \n        switch(name) { \n\n            case 'email':\n// eslint-disable-next-line\n                this.state.email=value;\n                if(value===''){\n// eslint-disable-next-line\n                    this.state.errors.email = 'Email is required';\n                }else{\n                     let emailValid = value.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n                     if(emailValid){\n// eslint-disable-next-line\n                        this.state.errors.email = '';\n                     }else{\n// eslint-disable-next-line\n                        this.state.errors.email = 'Email is invalid';\n                     }\n                     \n                }        \n               \n            break;\n            case 'password':\n// eslint-disable-next-line\n                this.state.password=value;\n                if(value===''){\n// eslint-disable-next-line\n                    this.state.errors.password = 'Password is required';\n                }else{\n                    // eslint-disable-next-line\n                     let password = value.match('^[a-zA-Z0-9!@#\\$%\\^&]{8,}$');\n                     if(password){\n// eslint-disable-next-line\n                        this.state.errors.password = '';\n//                         password = value.match('^(?=.*[0-9])(?=.{8,})');\n//                            if(password){\n// // eslint-disable-next-line\n//                                 this.state.errors.password = '';\n//                             }else{\n// // eslint-disable-next-line\n//                                 this.state.errors.password = 'Contains a number';\n//                             }\n                     }else{\n// eslint-disable-next-line\n                        this.state.errors.password = 'At least 8 characters';\n                     }\n                     \n                }        \n               \n            break;\n\n        }\n\n// eslint-disable-next-line\n        if(this.state.errors.email!=''||this.state.errors.password!='') {this.flag=1;}\n        else{this.flag=0;}\n        if(this.flag===1){\n// eslint-disable-next-line\n            this.state.formValid=false;\n        }else{\n// eslint-disable-next-line\n            this.state.formValid=true;\n        }\n// eslint-disable-next-line\n        this.forceUpdate();\n    }\n      handleLogin(event){\n// eslint-disable-next-line\n        this.state.loading=true;\n        this.forceUpdate();\n        event.preventDefault();\n        let email=event.target.email.value;\n        let password=event.target.password.value;\n        var formData = new FormData();\n        formData.append(\"email\", email);\n        formData.append(\"password\", password);\n        event.preventDefault();\n        fetch(this.state.domain+\"api/v1/login\",{method:\"POST\",header: {\n            'Content-Type' : 'application/json',\n            'Accept' : 'application/json',\n            },body:formData})\n        .then(res=>res.json())\n        .then(\n            (result)=>{\n               // console.log(result);\n\n                if(result.error){  \n                   \n               \n                        // eslint-disable-next-line\n                        this.state.errors.common=\"Invalid email or password.\";\n                 \n                    \n                   \n                    \n                }\n                if(result.success) {\n                    this.props.history.push(\"/Dashboard\");  \n                }\n                // eslint-disable-next-line         \n                 this.state.loading=false;\n                 this.forceUpdate();\n            },\n            (error)=>{\n               \n            }\n        )\n    }\n    componentDidMount(){\n                // eslint-disable-next-line   \n                this.state.loading=false;\n                this.forceUpdate();   \n    }\n    render() {\n        return (\n            <div>\n             <LoadingScreen\n                loading={this.state.loading}\n                bgColor='#f1f1f1'\n                spinnerColor='#9ee5f8'\n                textColor='#676767'\n                text=''\n              > \n              </LoadingScreen>\n                 <form onSubmit={this.handleLogin} method=\"post\" hidden={this.state.loading}>\n          \n                    <h3>Login to your account</h3>\n\n                    <div className=\"form-group\">\n                        <label>Email address</label>\n                        <input type=\"email\" name=\"email\" className=\"form-control\" placeholder=\"Enter email\" onBlur={e => this.onTodoChange(e)}  />\n                          <span className=\"errors\">{this.state.errors.email}</span>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label>Password</label>\n                        <input type=\"password\" name=\"password\" className=\"form-control\" placeholder=\"Enter password\" onBlur={e => this.onTodoChange(e)} onChange={e => this.onTodoChange(e)} />\n                        <span className=\"errors\">{this.state.errors.password}</span>\n                    </div>\n\n                    <div className=\"errors alert alert-danger\" hidden={this.state.errors.common==''}  role=\"alert\">{this.state.errors.common}</div>\n\n                    <button type=\"submit\" className=\"btn btn-primary btn-block\" disabled={!this.state.formValid}>Login</button>\n                    <p className=\"forgot-password text-right\">\n                       \n                    </p>\n\n                    <p className=\"forgot-password\">\n                    Donâ€™t have an account? <Link  to={\"/sign-up\"}>Register your business</Link>\n                    </p>\n                </form>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}